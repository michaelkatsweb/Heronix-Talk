# ============================================
# Heronix Talk - Main Configuration
# Offline-First Chat Messaging Server
# ============================================

# Application Info
spring.application.name=heronix-talk
server.port=9680

# Default profile (H2 for offline-first)
spring.profiles.active=h2

# ============================================
# Server Configuration
# ============================================

# Try multiple ports if primary is busy
server.port.fallback.1=9681
server.port.fallback.2=9682
server.port.fallback.3=9683

# Server settings
server.servlet.context-path=/
server.compression.enabled=true
server.compression.mime-types=application/json,text/html,text/plain

# ============================================
# Session Configuration
# ============================================

heronix.session.timeout-hours=24
heronix.session.remember-me-days=30
heronix.session.inactivity-timeout-minutes=30
heronix.session.stale-session-timeout-minutes=60

# ============================================
# Initialization Settings
# ============================================

heronix.init.create-defaults=true
heronix.init.create-test-data=false

# ============================================
# WebSocket Configuration
# ============================================

heronix.websocket.allowed-origins=*
heronix.websocket.heartbeat-interval-seconds=30

# ============================================
# File Upload Configuration
# ============================================

heronix.upload.max-file-size-mb=25
heronix.upload.allowed-extensions=jpg,jpeg,png,gif,pdf,doc,docx,xls,xlsx,ppt,pptx,txt,zip
heronix.upload.storage-path=./uploads

# ============================================
# Sync Configuration (for teacher portal integration)
# ============================================

heronix.sync.enabled=true
heronix.sync.interval-seconds=60
heronix.sync.teacher-portal.url=http://localhost:58280

# ============================================
# SIS Database Sync Configuration
# ============================================
# Heronix-Talk syncs teacher/staff accounts from the SIS (EduScheduler-Pro)
# This allows teachers to login to Talk using their SIS credentials

heronix.sis.sync.enabled=true
heronix.sis.sync.interval-seconds=300
# SIS Database Connection (EduScheduler-Pro H2 database)
# IMPORTANT: Update this path to match your EduScheduler-Pro installation
heronix.sis.db.url=jdbc:h2:file:H:/EduScheduler/eduscheduler-pro/data/eduscheduler;AUTO_SERVER=TRUE;MODE=MySQL
heronix.sis.db.username=sa
heronix.sis.db.password=
heronix.sis.db.driver=org.h2.Driver

# ============================================
# Logging Configuration
# ============================================

logging.level.root=INFO
logging.level.com.heronix.talk=DEBUG
logging.level.org.springframework.web.socket=DEBUG
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN

logging.file.name=./logs/heronix-talk.log
logging.file.max-size=10MB
logging.file.max-history=7

# ============================================
# Jackson Configuration
# ============================================

spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=UTC
spring.jackson.date-format=yyyy-MM-dd'T'HH:mm:ss

# ============================================
# JPA Common Settings
# ============================================

spring.jpa.open-in-view=false
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=false
