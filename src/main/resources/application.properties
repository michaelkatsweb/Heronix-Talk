# ============================================
# Heronix Talk - Main Configuration
# Offline-First Chat Messaging Server
# ============================================

# Application Info
spring.application.name=heronix-talk
server.port=9680

# Default profile (H2 for offline-first)
spring.profiles.active=h2

# ============================================
# Server Configuration
# ============================================

# Try multiple ports if primary is busy
server.port.fallback.1=9681
server.port.fallback.2=9682
server.port.fallback.3=9683

# Server settings
server.servlet.context-path=/
server.compression.enabled=true
server.compression.mime-types=application/json,text/html,text/plain

# ============================================
# Session Configuration
# ============================================

heronix.session.timeout-hours=24
heronix.session.remember-me-days=30
heronix.session.inactivity-timeout-minutes=30
heronix.session.stale-session-timeout-minutes=60

# ============================================
# Initialization Settings
# ============================================

heronix.init.create-defaults=true
heronix.init.create-test-data=false

# ============================================
# WebSocket Configuration
# ============================================

heronix.websocket.allowed-origins=*
heronix.websocket.heartbeat-interval-seconds=30

# ============================================
# File Upload Configuration
# ============================================

heronix.upload.max-file-size-mb=25
heronix.upload.allowed-extensions=jpg,jpeg,png,gif,pdf,doc,docx,xls,xlsx,ppt,pptx,txt,zip
heronix.upload.storage-path=./uploads

# ============================================
# Sync Configuration (for teacher portal integration)
# ============================================

heronix.sync.enabled=true
heronix.sync.interval-seconds=60
heronix.sync.teacher-portal.url=http://localhost:58280

# ============================================
# SIS Integration Configuration
# ============================================
# Heronix-Talk can sync teacher/staff accounts from Heronix-Application (SIS)
# GitHub: https://github.com/michaelkatsweb/Heronix-Application
# Supports both API-based sync and manual CSV/JSON import

# Enable/disable automatic sync
heronix.sis.sync.enabled=false
heronix.sis.sync.interval-seconds=300

# API-based sync (primary method)
# Heronix-Application runs on port 8080 by default
# Endpoint /api/teachers returns teacher data for scheduling integration
heronix.sis.api.enabled=true
heronix.sis.api.base-url=http://localhost:8080
heronix.sis.api.endpoint=/api/teachers
heronix.sis.api.token=
heronix.sis.api.timeout-seconds=30

# Import settings (for CSV/JSON file imports)
heronix.sis.import.directory=./imports
heronix.sis.import.processed-directory=./imports/processed
heronix.sis.import.auto-process=false

# Direct database sync (fallback when API is unavailable)
# Connects directly to the Heronix-Application H2 database
heronix.sis.database.enabled=false
heronix.sis.database.url=jdbc:h2:file:F:/Programs/Heronix-Application/data/heronix;AUTO_SERVER=TRUE;MODE=MySQL
heronix.sis.database.username=admin
heronix.sis.database.password=admin123
heronix.sis.database.driver-class-name=org.h2.Driver
heronix.sis.database.table-name=teachers

# ============================================
# Logging Configuration
# ============================================

logging.level.root=INFO
logging.level.com.heronix.talk=DEBUG
logging.level.org.springframework.web.socket=DEBUG
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN

logging.file.name=./logs/heronix-talk.log
logging.file.max-size=10MB
logging.file.max-history=7

# ============================================
# Jackson Configuration
# ============================================

spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=UTC
spring.jackson.date-format=yyyy-MM-dd'T'HH:mm:ss

# ============================================
# JPA Common Settings
# ============================================

spring.jpa.open-in-view=false
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=false
